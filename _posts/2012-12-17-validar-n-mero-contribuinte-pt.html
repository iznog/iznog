---
layout: post
title: Validar número contribuinte PT
date: 2012-12-17
comments: false
---

<div class='post'>
Como necessitei de criar um utilitário para a validação do numero de contribuinte, coloco aqui a função que criei em PHP para esse fim.<br /><br /><br /><div style="font-family: &quot;Courier New&quot;,Courier,monospace;"><span style="font-size: small;"><br /></span></div><span style="font-family: &quot;Courier New&quot;,Courier,monospace; font-size: small;">&lt;?php<br />&nbsp;&nbsp;&nbsp; /**<br />&nbsp;&nbsp;&nbsp; &nbsp; * Função que valida se a estrutura do numero de contribuinte português é válida<br />&nbsp;&nbsp;&nbsp; &nbsp; * <br />&nbsp;&nbsp;&nbsp; &nbsp; * @todo validar se caracteres são todos digitos...<br />&nbsp;&nbsp;&nbsp; &nbsp; * <br />&nbsp;&nbsp;&nbsp; &nbsp; * Devolve os valores:<br />&nbsp;&nbsp;&nbsp; &nbsp; * - 0 se o numero é válido<br />&nbsp;&nbsp;&nbsp; &nbsp; * - 1 se o numero é inválido<br />&nbsp;&nbsp;&nbsp; &nbsp; * - 2 se o numero tem comprimento errado<br />&nbsp;&nbsp;&nbsp; &nbsp; * <br />&nbsp;&nbsp;&nbsp; &nbsp; * <br />&nbsp;&nbsp;&nbsp; &nbsp; */<br />&nbsp;&nbsp;&nbsp; function calcularNif($string_nif){<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if(strlen($string_nif)==9){<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $nif_temp=str_split($string_nif);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $soma_controlo=0;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $digito_controlo_calculado=0;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; for($indice=0;$indice&lt;8;$indice++){<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $soma_controlo+=$nif_temp[$indice]*($indice+2);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $calculo_parcial=intval($soma_controlo/11);<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $calculo_parcial2=11*$calculo_parcial;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $digito_controlo_calculado=$soma_controlo-$calculo_parcial2;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if($digito_controlo_calculado==10)<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; $digito_controlo_calculado=0;<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; if($digito_controlo_calculado==$nif_temp[8])<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return 0; //Devolve 0 se o numero é válido <br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; else<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return 1; //Devolve 1 se o numero é inválido<br /><br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; }<br />&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; return 2; // Devolve 2 se numero com comprimento invalido<br />&nbsp;&nbsp;&nbsp; }<br /><br />?&gt;</span><br /><br /><span style="font-family: inherit;"><b>Nota:</b> Como</span> é óbvio deverão usar o código à vossa responsabilidade e deverão validar a sua correcção.<br />Não terei nem aceito qualquer responsabilidade sobre o seu uso e eventuais prejuízos pela sua utilização.<br /><br /><blockquote></blockquote></div>

